{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nlet FormProductsComponent = class FormProductsComponent {\n  constructor(formBuilder, productService) {\n    this.formBuilder = formBuilder;\n    this.productService = productService;\n    this.selectedImage = null; // Para almacenar la ruta de la imagen seleccionada\n    this.productForm = this.formBuilder.group({\n      name: ['', Validators.required],\n      description: ['', Validators.required],\n      price: [0, [Validators.required, Validators.min(0)]],\n      categoria: ['', Validators.required],\n      onSale: [false],\n      image: ['', Validators.required] // Agregamos un campo para la imagen\n    });\n  }\n\n  onSubmit() {\n    if (this.productForm.valid) {\n      const product = {\n        id: '',\n        name: this.productForm.get('name')?.value,\n        description: this.productForm.get('description')?.value,\n        price: this.productForm.get('price')?.value,\n        categoria: this.productForm.get('categoria')?.value,\n        onSale: this.productForm.get('onSale')?.value,\n        image: this.productForm.get('image')?.value // Usamos la ruta de la imagen en lugar del archivo\n      };\n\n      this.productService.addProduct(product).subscribe(response => {\n        console.log('Form submitted successfully!', response);\n      }, error => {\n        console.error('Error submitting form!', error);\n      });\n    } else {\n      console.log('Form is invalid!');\n    }\n  }\n  onImageSelected(event) {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = e => {\n        this.selectedImage = e.target.result;\n        this.productForm.patchValue({\n          image: this.selectedImage\n        });\n      };\n      reader.readAsDataURL(file);\n    }\n  }\n};\nFormProductsComponent = __decorate([Component({\n  selector: 'app-form-products',\n  templateUrl: './form-products.component.html',\n  styleUrls: ['./form-products.component.css']\n})], FormProductsComponent);\nexport { FormProductsComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAAiCC,UAAU,QAAQ,gBAAgB;AAS5D,IAAMC,qBAAqB,GAA3B,MAAMA,qBAAqB;EAIhCC,YAAoBC,WAAwB,EAAUC,cAA8B;IAAhE,gBAAW,GAAXD,WAAW;IAAuB,mBAAc,GAAdC,cAAc;IAFpE,kBAAa,GAAkB,IAAI,CAAC,CAAC;IAGnC,IAAI,CAACC,WAAW,GAAG,IAAI,CAACF,WAAW,CAACG,KAAK,CAAC;MACxCC,IAAI,EAAE,CAAC,EAAE,EAAEP,UAAU,CAACQ,QAAQ,CAAC;MAC/BC,WAAW,EAAE,CAAC,EAAE,EAAET,UAAU,CAACQ,QAAQ,CAAC;MACtCE,KAAK,EAAE,CAAC,CAAC,EAAE,CAACV,UAAU,CAACQ,QAAQ,EAAER,UAAU,CAACW,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;MACpDC,SAAS,EAAE,CAAC,EAAE,EAAEZ,UAAU,CAACQ,QAAQ,CAAC;MACpCK,MAAM,EAAE,CAAC,KAAK,CAAC;MACfC,KAAK,EAAE,CAAC,EAAE,EAAEd,UAAU,CAACQ,QAAQ,CAAC,CAAC;KAClC,CAAC;EACJ;;EAEAO,QAAQ;IACN,IAAI,IAAI,CAACV,WAAW,CAACW,KAAK,EAAE;MAC1B,MAAMC,OAAO,GAAiB;QAC5BC,EAAE,EAAE,EAAE;QACNX,IAAI,EAAE,IAAI,CAACF,WAAW,CAACc,GAAG,CAAC,MAAM,CAAC,EAAEC,KAAK;QACzCX,WAAW,EAAE,IAAI,CAACJ,WAAW,CAACc,GAAG,CAAC,aAAa,CAAC,EAAEC,KAAK;QACvDV,KAAK,EAAE,IAAI,CAACL,WAAW,CAACc,GAAG,CAAC,OAAO,CAAC,EAAEC,KAAK;QAC3CR,SAAS,EAAE,IAAI,CAACP,WAAW,CAACc,GAAG,CAAC,WAAW,CAAC,EAAEC,KAAK;QACnDP,MAAM,EAAE,IAAI,CAACR,WAAW,CAACc,GAAG,CAAC,QAAQ,CAAC,EAAEC,KAAK;QAC7CN,KAAK,EAAE,IAAI,CAACT,WAAW,CAACc,GAAG,CAAC,OAAO,CAAC,EAAEC,KAAK,CAAC;OAC7C;;MAED,IAAI,CAAChB,cAAc,CAACiB,UAAU,CAACJ,OAAO,CAAC,CAACK,SAAS,CAC/CC,QAAQ,IAAG;QACTC,OAAO,CAACC,GAAG,CAAC,8BAA8B,EAAEF,QAAQ,CAAC;MACvD,CAAC,EACDG,KAAK,IAAG;QACNF,OAAO,CAACE,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAChD,CAAC,CACF;KACF,MAAM;MACLF,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;;EAEnC;EAEAE,eAAe,CAACC,KAAU;IACxB,MAAMC,IAAI,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAClC,IAAIF,IAAI,EAAE;MACR,MAAMG,MAAM,GAAG,IAAIC,UAAU,EAAE;MAC/BD,MAAM,CAACE,MAAM,GAAIC,CAAM,IAAI;QACzB,IAAI,CAACC,aAAa,GAAGD,CAAC,CAACL,MAAM,CAACO,MAAM;QACpC,IAAI,CAAChC,WAAW,CAACiC,UAAU,CAAC;UAAExB,KAAK,EAAE,IAAI,CAACsB;QAAa,CAAE,CAAC;MAC5D,CAAC;MACDJ,MAAM,CAACO,aAAa,CAACV,IAAI,CAAC;;EAE9B;CACD;AAnDY5B,qBAAqB,eALjCF,SAAS,CAAC;EACTyC,QAAQ,EAAE,mBAAmB;EAC7BC,WAAW,EAAE,gCAAgC;EAC7CC,SAAS,EAAE,CAAC,+BAA+B;CAC5C,CAAC,GACWzC,qBAAqB,CAmDjC;SAnDYA,qBAAqB","names":["Component","Validators","FormProductsComponent","constructor","formBuilder","productService","productForm","group","name","required","description","price","min","categoria","onSale","image","onSubmit","valid","product","id","get","value","addProduct","subscribe","response","console","log","error","onImageSelected","event","file","target","files","reader","FileReader","onload","e","selectedImage","result","patchValue","readAsDataURL","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["E:\\Angular2\\CRUD-MySQL-Express-Angular\\crud_angular\\src\\app\\components\\Contenidos\\form-products\\form-products.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ProductService } from '../../../shared/products.service'; // Ajusta la ruta segÃºn sea necesario\r\nimport { ProductModel } from 'src/app/shared/products.model';\r\n\r\n@Component({\r\n  selector: 'app-form-products',\r\n  templateUrl: './form-products.component.html',\r\n  styleUrls: ['./form-products.component.css']\r\n})\r\nexport class FormProductsComponent {\r\n  productForm: FormGroup;\r\n  selectedImage: string | null = null; // Para almacenar la ruta de la imagen seleccionada\r\n\r\n  constructor(private formBuilder: FormBuilder, private productService: ProductService) {\r\n    this.productForm = this.formBuilder.group({\r\n      name: ['', Validators.required],\r\n      description: ['', Validators.required],\r\n      price: [0, [Validators.required, Validators.min(0)]],\r\n      categoria: ['', Validators.required],\r\n      onSale: [false],\r\n      image: ['', Validators.required] // Agregamos un campo para la imagen\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n    if (this.productForm.valid) {\r\n      const product: ProductModel = {\r\n        id: '',\r\n        name: this.productForm.get('name')?.value,\r\n        description: this.productForm.get('description')?.value,\r\n        price: this.productForm.get('price')?.value,\r\n        categoria: this.productForm.get('categoria')?.value,\r\n        onSale: this.productForm.get('onSale')?.value,\r\n        image: this.productForm.get('image')?.value // Usamos la ruta de la imagen en lugar del archivo\r\n      };\r\n\r\n      this.productService.addProduct(product).subscribe(\r\n        response => {\r\n          console.log('Form submitted successfully!', response);\r\n        },\r\n        error => {\r\n          console.error('Error submitting form!', error);\r\n        }\r\n      );\r\n    } else {\r\n      console.log('Form is invalid!');\r\n    }\r\n  }\r\n\r\n  onImageSelected(event: any) {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onload = (e: any) => {\r\n        this.selectedImage = e.target.result;\r\n        this.productForm.patchValue({ image: this.selectedImage });\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}