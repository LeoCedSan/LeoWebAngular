{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../shared/products.service\";\nexport class FormProductsComponent {\n  constructor(formBuilder, productService) {\n    this.formBuilder = formBuilder;\n    this.productService = productService;\n    this.selectedFile = null; // Variable para almacenar el archivo seleccionado\n    this.productForm = this.formBuilder.group({\n      name: ['', Validators.required],\n      description: ['', Validators.required],\n      price: [0, [Validators.required, Validators.min(0)]],\n      categoria: ['', Validators.required],\n      onSale: [false],\n      image: [null, Validators.required]\n    });\n  }\n  onImageSelected(event) {\n    this.selectedFile = event.target.files[0]; // Captura el archivo seleccionado\n  }\n\n  onSubmit() {\n    if (this.productForm.valid && this.selectedFile) {\n      const formData = new FormData();\n      formData.append('name', this.productForm.get('name').value);\n      formData.append('description', this.productForm.get('description').value);\n      formData.append('price', this.productForm.get('price').value);\n      formData.append('categoria', this.productForm.get('categoria').value);\n      formData.append('onSale', this.productForm.get('onSale').value);\n      formData.append('image', this.selectedFile); // Agrega el archivo al FormData\n      this.productService.addProduct(formData).subscribe(response => {\n        console.log('Product added successfully', response);\n        this.productForm.reset(); // Resetea el formulario\n      }, error => {\n        console.error('Error adding product', error);\n      });\n    } else {\n      console.error('Invalid form');\n    }\n  }\n  static #_ = this.ɵfac = function FormProductsComponent_Factory(t) {\n    return new (t || FormProductsComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ProductService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: FormProductsComponent,\n    selectors: [[\"app-form-products\"]],\n    decls: 27,\n    vars: 1,\n    consts: [[\"enctype\", \"multipart/form-data\", 1, \"space-y-4\", 3, \"formGroup\", \"ngSubmit\"], [\"for\", \"name\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\"], [\"id\", \"name\", \"formControlName\", \"name\", \"type\", \"text\", 1, \"mt-1\", \"block\", \"w-full\", \"shadow-sm\", \"sm:text-sm\", \"border-gray-300\", \"rounded-md\"], [\"for\", \"description\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\"], [\"id\", \"description\", \"formControlName\", \"description\", \"type\", \"text\", 1, \"mt-1\", \"block\", \"w-full\", \"shadow-sm\", \"sm:text-sm\", \"border-gray-300\", \"rounded-md\"], [\"for\", \"price\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\"], [\"id\", \"price\", \"formControlName\", \"price\", \"type\", \"number\", 1, \"mt-1\", \"block\", \"w-full\", \"shadow-sm\", \"sm:text-sm\", \"border-gray-300\", \"rounded-md\"], [\"for\", \"categoria\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\"], [\"id\", \"categoria\", \"formControlName\", \"categoria\", \"type\", \"text\", 1, \"mt-1\", \"block\", \"w-full\", \"shadow-sm\", \"sm:text-sm\", \"border-gray-300\", \"rounded-md\"], [\"for\", \"onSale\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\"], [\"id\", \"onSale\", \"formControlName\", \"onSale\", \"type\", \"checkbox\", 1, \"mt-1\", \"block\"], [\"for\", \"image\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\"], [\"id\", \"image\", \"type\", \"file\", 1, \"mt-1\", \"block\", \"w-full\", 3, \"change\"], [\"type\", \"submit\", 1, \"mt-2\", \"bg-blue-500\", \"text-white\", \"py-2\", \"px-4\", \"rounded\"]],\n    template: function FormProductsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"form\", 0);\n        i0.ɵɵlistener(\"ngSubmit\", function FormProductsComponent_Template_form_ngSubmit_0_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(1, \"div\")(2, \"label\", 1);\n        i0.ɵɵtext(3, \"Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(4, \"input\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\")(6, \"label\", 3);\n        i0.ɵɵtext(7, \"Description\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(8, \"input\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\")(10, \"label\", 5);\n        i0.ɵɵtext(11, \"Price\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(12, \"input\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\")(14, \"label\", 7);\n        i0.ɵɵtext(15, \"Category\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"input\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\")(18, \"label\", 9);\n        i0.ɵɵtext(19, \"On Sale\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(20, \"input\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\")(22, \"label\", 11);\n        i0.ɵɵtext(23, \"Image\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"input\", 12);\n        i0.ɵɵlistener(\"change\", function FormProductsComponent_Template_input_change_24_listener($event) {\n          return ctx.onImageSelected($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(25, \"button\", 13);\n        i0.ɵɵtext(26, \"Submit\");\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"formGroup\", ctx.productForm);\n      }\n    },\n    dependencies: [i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.CheckboxControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n    styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJmb3JtLXByb2R1Y3RzLmNvbXBvbmVudC5jc3MifQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9Db250ZW5pZG9zL2Zvcm0tcHJvZHVjdHMvZm9ybS1wcm9kdWN0cy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSw0S0FBNEsiLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["Validators","FormProductsComponent","constructor","formBuilder","productService","productForm","group","name","required","description","price","min","categoria","onSale","image","onImageSelected","event","selectedFile","target","files","onSubmit","valid","formData","FormData","append","get","value","addProduct","subscribe","response","console","log","reset","error","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["E:\\Angular2\\CRUD-MySQL-Express-Angular\\crud_angular\\src\\app\\components\\Contenidos\\form-products\\form-products.component.ts","E:\\Angular2\\CRUD-MySQL-Express-Angular\\crud_angular\\src\\app\\components\\Contenidos\\form-products\\form-products.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ProductService } from '../../../shared/products.service';\r\n@Component({\r\n    selector: 'app-form-products',\r\n    templateUrl: './form-products.component.html',\r\n    styleUrls: ['./form-products.component.css']\r\n})\r\nexport class FormProductsComponent {\r\n    productForm: FormGroup;\r\n    selectedFile: File | null = null; // Variable para almacenar el archivo seleccionado\r\n\r\n    constructor(private formBuilder: FormBuilder, private productService: ProductService) { // Asegúrate de inyectar el servicio aquí\r\n        this.productForm = this.formBuilder.group({\r\n            name: ['', Validators.required],\r\n            description: ['', Validators.required],\r\n            price: [0, [Validators.required, Validators.min(0)]],\r\n            categoria: ['', Validators.required],\r\n            onSale: [false],\r\n            image: [null, Validators.required],\r\n        });\r\n    }\r\n\r\n    onImageSelected(event: any) {\r\n        this.selectedFile = event.target.files[0]; // Captura el archivo seleccionado\r\n    }\r\n\r\n    onSubmit() {\r\n        if (this.productForm.valid && this.selectedFile) {\r\n            const formData = new FormData();\r\n            formData.append('name', this.productForm.get('name')!.value);\r\n            formData.append('description', this.productForm.get('description')!.value);\r\n            formData.append('price', this.productForm.get('price')!.value);\r\n            formData.append('categoria', this.productForm.get('categoria')!.value);\r\n            formData.append('onSale', this.productForm.get('onSale')!.value);\r\n            formData.append('image', this.selectedFile); // Agrega el archivo al FormData\r\n\r\n            this.productService.addProduct(formData).subscribe(\r\n                response => {\r\n                    console.log('Product added successfully', response);\r\n                    this.productForm.reset(); // Resetea el formulario\r\n                },\r\n                error => {\r\n                    console.error('Error adding product', error);\r\n                }\r\n            );\r\n        } else {\r\n            console.error('Invalid form');\r\n        }\r\n    }\r\n}\r\n","<form [formGroup]=\"productForm\" (ngSubmit)=\"onSubmit()\" enctype=\"multipart/form-data\" class=\"space-y-4\">\r\n    <div>\r\n      <label for=\"name\" class=\"block text-sm font-medium text-gray-700\">Name</label>\r\n      <input id=\"name\" formControlName=\"name\" type=\"text\" class=\"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\">\r\n    </div>\r\n    <div>\r\n      <label for=\"description\" class=\"block text-sm font-medium text-gray-700\">Description</label>\r\n      <input id=\"description\" formControlName=\"description\" type=\"text\" class=\"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\">\r\n    </div>\r\n    <div>\r\n      <label for=\"price\" class=\"block text-sm font-medium text-gray-700\">Price</label>\r\n      <input id=\"price\" formControlName=\"price\" type=\"number\" class=\"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\">\r\n    </div>\r\n    <div>\r\n      <label for=\"categoria\" class=\"block text-sm font-medium text-gray-700\">Category</label>\r\n      <input id=\"categoria\" formControlName=\"categoria\" type=\"text\" class=\"mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md\">\r\n    </div>\r\n    <div>\r\n      <label for=\"onSale\" class=\"block text-sm font-medium text-gray-700\">On Sale</label>\r\n      <input id=\"onSale\" formControlName=\"onSale\" type=\"checkbox\" class=\"mt-1 block\">\r\n    </div>\r\n    <div>\r\n      <label for=\"image\" class=\"block text-sm font-medium text-gray-700\">Image</label>\r\n      <input id=\"image\" type=\"file\" (change)=\"onImageSelected($event)\" class=\"mt-1 block w-full\">\r\n    </div>\r\n    <button type=\"submit\" class=\"mt-2 bg-blue-500 text-white py-2 px-4 rounded\">Submit</button>\r\n  </form>\r\n  "]},"metadata":{},"sourceType":"module","externalDependencies":[]}